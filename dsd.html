<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quadratseite und Fläche (Parabel)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for better visualization */
        body {
            font-family: 'Inter', sans-serif; /* Use Inter font */
        }
        canvas {
            border: 1px solid #d1d5db; /* gray-300 */
            border-radius: 0.375rem; /* rounded-md */
            background-color: #f9fafb; /* gray-50 */
        }
        /* Style slider */
        input[type=range] {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 8px;
            background: #d1d5db; /* gray-300 */
            border-radius: 5px;
            outline: none;
            opacity: 0.7;
            transition: opacity .2s;
        }
        input[type=range]:hover {
            opacity: 1;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: #3b82f6; /* blue-500 */
            border-radius: 50%;
            cursor: pointer;
        }
        input[type=range]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: #3b82f6; /* blue-500 */
            border-radius: 50%;
            cursor: pointer;
            border: none; /* Remove default border in Firefox */
        }
        .label-text {
            color: #4b5563; /* gray-600 */
            font-weight: 500;
        }
        .value-display {
            font-weight: 600;
            color: #1f2937; /* gray-800 */
            min-width: 50px; /* Ensure space for values */
            text-align: right;
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body class="bg-gray-100 p-4 md:p-8 flex flex-col items-center min-h-screen">

    <div class="bg-white p-6 rounded-lg shadow-md w-full max-w-4xl">
        <h1 class="text-2xl font-semibold text-center text-gray-700 mb-6">Visualisierung: Quadratseite 'a' und Fläche 'a²'</h1>

        <div class="mb-6 px-4">
            <label for="aSlider" class="block text-sm font-medium text-gray-700 mb-2">Seitenlänge a:</label>
            <input type="range" id="aSlider" min="0" max="10" step="0.1" value="3" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700">
            <div class="flex justify-between text-sm text-gray-500 mt-1">
                <span>0</span>
                <span>5</span>
                <span>10</span>
            </div>
        </div>

        <div class="flex justify-center space-x-8 mb-6 text-lg">
            <div class="text-center bg-blue-50 p-3 rounded-md shadow-sm">
                <span class="label-text">a = </span>
                <span id="aValue" class="value-display">3.0</span>
            </div>
            <div class="text-center bg-green-50 p-3 rounded-md shadow-sm">
                <span class="label-text">a² = </span>
                <span id="aSquaredValue" class="value-display">9.0</span>
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="text-center p-4 border border-gray-200 rounded-lg bg-white">
                <h2 class="text-lg font-medium text-gray-600 mb-2">Quadrat (Seite a)</h2>
                <canvas id="squareCanvas" width="300" height="300" class="mx-auto"></canvas>
            </div>

            <div class="text-center p-4 border border-gray-200 rounded-lg bg-white">
                <h2 class="text-lg font-medium text-gray-600 mb-2">Parabel (y = x²)</h2>
                <canvas id="parabolaCanvas" width="300" height="300" class="mx-auto"></canvas>
            </div>
        </div>
    </div>

    <script>
        // Get DOM elements
        const slider = document.getElementById('aSlider');
        const aValueDisplay = document.getElementById('aValue');
        const aSquaredValueDisplay = document.getElementById('aSquaredValue');
        const squareCanvas = document.getElementById('squareCanvas');
        const parabolaCanvas = document.getElementById('parabolaCanvas');
        const sqCtx = squareCanvas.getContext('2d');
        const paCtx = parabolaCanvas.getContext('2d');

        // Constants for drawing
        const maxA = parseFloat(slider.max); // Maximum value of 'a' from slider
        const sqPadding = 30; // Padding for square canvas
        const paPadding = 30; // Padding for parabola canvas
        const sqCanvasSize = squareCanvas.width;
        const paCanvasSize = parabolaCanvas.width;

        // --- Drawing Functions ---

        // Function to draw the square
        function drawSquare(a) {
            sqCtx.clearRect(0, 0, sqCanvasSize, sqCanvasSize); // Clear canvas
            sqCtx.fillStyle = "#f3f4f6"; // bg-gray-100 for canvas background
            sqCtx.fillRect(0, 0, sqCanvasSize, sqCanvasSize);

            // Calculate square size based on 'a' and canvas size
            // Scale 'a' to fit within the canvas minus padding
            const maxDrawableSize = sqCanvasSize - 2 * sqPadding;
            const side = (a / maxA) * maxDrawableSize;

            // Calculate top-left corner to center the square
            const x = (sqCanvasSize - side) / 2;
            const y = (sqCanvasSize - side) / 2;

            // Draw the square
            sqCtx.strokeStyle = '#3b82f6'; // blue-500
            sqCtx.lineWidth = 2;
            sqCtx.strokeRect(x, y, side, side);

            // Draw label 'a'
            sqCtx.fillStyle = '#1f2937'; // gray-800
            sqCtx.font = '14px Inter';
            sqCtx.textAlign = 'center';
            sqCtx.fillText('a', x + side / 2, y + side + 15); // Below the square
            if (side > 20) { // Add side label if square is large enough
                 sqCtx.textAlign = 'right';
                 sqCtx.fillText('a', x - 5, y + side / 2 + 5); // Left of the square
            }
        }

        // Function to draw the parabola and the point (a, a^2)
        function drawParabola(a) {
            paCtx.clearRect(0, 0, paCanvasSize, paCanvasSize); // Clear canvas
            paCtx.fillStyle = "#f3f4f6"; // bg-gray-100 for canvas background
            paCtx.fillRect(0, 0, paCanvasSize, paCanvasSize);

            const maxX = maxA; // Max x-value corresponds to max 'a'
            const maxY = maxA * maxA; // Max y-value is maxA squared

            // Calculate scaling factors
            const scaleX = (paCanvasSize - 2 * paPadding) / maxX;
            // Adjust scaleY slightly to prevent parabola hitting the top edge exactly
            const scaleY = (paCanvasSize - 2 * paPadding) / (maxY * 1.05);

            // --- Draw Axes ---
            const originX = paPadding;
            const originY = paCanvasSize - paPadding;

            paCtx.strokeStyle = '#6b7280'; // gray-500
            paCtx.lineWidth = 1;
            paCtx.beginPath();
            // Y-axis
            paCtx.moveTo(originX, paPadding / 2); // Start slightly above bottom padding
            paCtx.lineTo(originX, originY);
            // X-axis
            paCtx.lineTo(paCanvasSize - paPadding / 2, originY); // End slightly before right padding
            paCtx.stroke();

            // Axis Labels
            paCtx.fillStyle = '#4b5563'; // gray-600
            paCtx.font = '12px Inter';
            paCtx.textAlign = 'center';
            paCtx.fillText('a', paCanvasSize - paPadding / 2, originY + 15); // X-axis label
            paCtx.textAlign = 'right';
            paCtx.fillText('a²', originX - 8, paPadding); // Y-axis label

            // --- Draw Parabola (y = x^2) ---
            paCtx.beginPath();
            paCtx.strokeStyle = '#10b981'; // emerald-500
            paCtx.lineWidth = 2;
            let firstPoint = true;
            for (let xPlot = 0; xPlot <= maxX; xPlot += 0.1) {
                const yPlot = xPlot * xPlot;
                const canvasX = originX + xPlot * scaleX;
                const canvasY = originY - yPlot * scaleY;

                if (canvasY < paPadding / 2) continue; // Don't draw outside bounds

                if (firstPoint) {
                    paCtx.moveTo(canvasX, canvasY);
                    firstPoint = false;
                } else {
                    paCtx.lineTo(canvasX, canvasY);
                }
            }
            paCtx.stroke();

            // --- Draw Point (a, a^2) ---
            const aSquared = a * a;
            const pointX = originX + a * scaleX;
            const pointY = originY - aSquared * scaleY;

            // Draw the point
            paCtx.fillStyle = '#ef4444'; // red-500
            paCtx.beginPath();
            paCtx.arc(pointX, pointY, 5, 0, 2 * Math.PI); // Draw a circle for the point
            paCtx.fill();

            // Draw lines to axes
            paCtx.beginPath();
            paCtx.strokeStyle = '#ef4444'; // red-500
            paCtx.setLineDash([3, 3]); // Dashed lines
            paCtx.lineWidth = 1;
            // Line to Y-axis
            paCtx.moveTo(originX, pointY);
            paCtx.lineTo(pointX, pointY);
            // Line to X-axis
            paCtx.lineTo(pointX, originY);
            paCtx.stroke();
            paCtx.setLineDash([]); // Reset line dash

            // Label the point's coordinates
            paCtx.fillStyle = '#ef4444'; // red-500
            paCtx.font = '12px Inter';
            // Label 'a' on X-axis
            paCtx.textAlign = 'center';
            paCtx.fillText(a.toFixed(1), pointX, originY + 15);
            // Label 'a²' on Y-axis
            paCtx.textAlign = 'right';
            // Prevent label overlap with axis label if a^2 is large
            const yLabelPos = Math.max(pointY + 4, paPadding + 15);
             paCtx.fillText(aSquared.toFixed(1), originX - 8, yLabelPos);

        }

        // --- Update Function ---
        function updateVisualizations() {
            const a = parseFloat(slider.value);
            const aSquared = a * a;

            // Update text displays
            aValueDisplay.textContent = a.toFixed(1); // Format to one decimal place
            aSquaredValueDisplay.textContent = aSquared.toFixed(1); // Format to one decimal place

            // Redraw canvases
            drawSquare(a);
            drawParabola(a);
        }

        // --- Event Listener ---
        slider.addEventListener('input', updateVisualizations);

        // --- Initial Draw ---
        // Ensure canvases have dimensions set before drawing
        squareCanvas.width = 300;
        squareCanvas.height = 300;
        parabolaCanvas.width = 300;
        parabolaCanvas.height = 300;
        updateVisualizations(); // Draw initially based on default slider value

        // Optional: Redraw on resize for better responsiveness if needed
        // window.addEventListener('resize', () => {
        //     // Adjust canvas sizes if necessary based on container
        //     // Note: Resizing canvas clears it, so redraw needed
        //     // This basic example uses fixed size, but could be adapted
        //     updateVisualizations();
        // });

    </script>

</body>
</html>
